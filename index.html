<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wind Share Cloud</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://ssl.gstatic.com/images/branding/product/1x/drive_2020q4_32dp.png">
</head>
<body>

<div id="limit-overlay">
    <div class="limit-box">
        <h2>âš ï¸ Server QuÃ¡ Táº£i</h2>
        <p>Há»‡ thá»‘ng Ä‘ang giá»›i háº¡n tá»‘i Ä‘a <strong>20 ngÆ°á»i</strong> truy cáº­p cÃ¹ng lÃºc Ä‘á»ƒ Ä‘áº£m báº£o tá»‘c Ä‘á»™.</p>
        <p>Vui lÃ²ng quay láº¡i sau Ã­t phÃºt!</p>
        <button onclick="location.reload()" class="btn-submit">Thá»­ láº¡i ngay</button>
    </div>
</div>

<div class="container" id="mainContainer">
    <header>
        <div class="logo-area">
            <svg class="logo-icon" viewBox="0 0 87.3 78" xmlns="http://www.w3.org/2000/svg"><path d="m6.6 66.85 25.3-43.2h50l-25.3 43.2z" fill="#0066da"/><path d="m0 0 25.3 43.2h-25.3z" fill="#00ac47"/><path d="m31.9 0-25.3 43.2-6.6-11.4 19.3-31.8z" fill="#ea4335"/><path d="m0 0h50l6.6 11.4h-56.6z" fill="#ffba00"/><path d="m31.9 0h55.4l-19.3 33h-55.4z" fill="#2684fc"/><path d="m87.3 33-25.3 43.2h-13.2l25.3-43.2z" fill="#00ac47"/></svg>
            <h2>Wind Cloud</h2>
        </div>
        
        <div style="display:flex; align-items:center; gap:10px;">
            <button id="themeBtn" class="btn-header icon-btn" onclick="toggleTheme()" title="Cháº¿ Ä‘á»™ tá»‘i">ğŸŒ™</button>
            <button id="loginBtn" class="btn-header" onclick="showLogin()">Admin Access</button>
            <button id="logoutBtn" class="btn-header" onclick="logout()" style="display:none; color: var(--danger); border-color:transparent">ThoÃ¡t</button>
        </div>
    </header>

    <div class="toolbar">
        <div class="tabs">
            <div class="tab-btn active" onclick="switchTab('video')" id="tab-video">Video</div>
            <div class="tab-btn" onclick="switchTab('image')" id="tab-image">HÃ¬nh áº£nh</div>
            <div class="tab-btn" onclick="switchTab('doc')" id="tab-doc">TÃ i liá»‡u</div>
            <div class="tab-btn" onclick="switchTab('other')" id="tab-other">File khÃ¡c</div>
        </div>

        <div class="tools-right" style="display:flex; gap:10px; align-items:center;">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ğŸ” TÃ¬m kiáº¿m..." oninput="handleSearch(this.value)">
            </div>

            <button class="btn-header icon-btn" onclick="toggleViewMode()" id="viewBtn" title="Äá»•i giao diá»‡n">âŠ</button>

            <select id="sortSelect" onchange="changeSortMode(this.value)" class="sort-select">
                <option value="date_desc">ğŸ“… Má»›i nháº¥t</option>
                <option value="date_asc">ğŸ“… CÅ© nháº¥t</option>
                <option value="name_asc">ğŸ”¤ TÃªn (A-Z)</option>
                <option value="name_desc">ğŸ”¤ TÃªn (Z-A)</option>
            </select>
            
            <button id="btnNew" class="btn-header" onclick="toggleAdminTool()" style="display:none; background: var(--primary); color: white; border:none; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">+ ThÃªm</button>
        </div>
    </div>

    <div class="breadcrumb" id="breadcrumb">
        <span class="crumb-item" onclick="navigateTo('root')">Trang chá»§</span>
    </div>

    <div class="input-section" id="adminTool">
        <div class="input-header" style="display:flex; justify-content:space-between; margin-bottom: 10px;">
            <h4>Upload Tá»‡p</h4>
            <span style="cursor:pointer; font-size: 20px; color: #5f6368;" onclick="toggleAdminTool()">âœ•</span>
        </div>
        <div class="input-row">
            <input type="text" id="mediaUrl" placeholder="DÃ¡n Link Google Drive vÃ o Ä‘Ã¢y..." oninput="autoFillID()">
            <input type="text" id="mediaTitle" placeholder="TÃªn hiá»ƒn thá»‹ (TÃ¹y chá»n)...">
            <button class="btn-submit" onclick="addToCloud()">LÆ°u Tá»‡p</button>
        </div>
    </div>

    <div class="media-grid" id="grid"></div>

    <footer class="site-footer">
        Trang web thuá»™c sá»Ÿ há»¯u cá»§a Trá»‹nh Gia Phong
    </footer>
</div>

<div id="contextMenu">
    <div id="menu-bg">
        <div class="menu-item" onclick="createFolderUI()">ğŸ“ Táº¡o thÆ° má»¥c má»›i</div>
        <div class="menu-item" onclick="pasteItem()">ğŸ“‹ DÃ¡n (Paste)</div>
    </div>
    <div id="menu-item">
        <div class="menu-item" onclick="openContextItem()">ğŸ‘€ Má»Ÿ</div>
        <div class="menu-item" onclick="downloadItem()">â¬‡ï¸ Táº£i xuá»‘ng</div> 
        <div class="menu-divider"></div>
        <div class="menu-item" id="menuSetSort" onclick="setFolderSortUI()">âš™ï¸ Sáº¯p xáº¿p máº·c Ä‘á»‹nh</div>
        <div class="menu-divider"></div>
        <div class="menu-item" onclick="cutItem()">âœ‚ï¸ Di chuyá»ƒn (Cut)</div> 
        <div class="menu-item" onclick="copyItem()">ğŸ“ Sao chÃ©p (Copy)</div>
        <div class="menu-item" onclick="renameItemUI()">âœï¸ Äá»•i tÃªn</div>
        <div class="menu-item" onclick="editLinkUI()">ğŸ”— Sá»­a Link</div>
        
        <div class="menu-divider"></div>
        <div class="menu-item danger" onclick="deleteItem()">ğŸ—‘ XÃ³a</div>
    </div>
</div>

<div id="mediaModal" class="modal">
    <div class="modal-content" id="modalContent"></div>
</div>

<div id="overlay" onclick="closeLogin()"></div>
<div id="login-panel" style="display: none;">
    <div class="admin-card">
        <div class="title">Admin Login</div>
        <form class="admin-form" onsubmit="event.preventDefault()">
            <input class="admin-input" id="adminEmail" name="email" placeholder="Email" type="email">
            <input class="admin-input" id="adminPass" name="password" placeholder="Password" type="password">
            
            <button class="admin-btn" id="btnLogin" type="button" onclick="loginAdmin()">Truy cáº­p!</button>
            
            <p id="loginError" style="color:red; font-size:13px; display:none; margin:0; text-align:center"></p>
        </form>
        
        <button onclick="closeLogin()" class="btn-close-login">ÄÃ³ng cá»­a sá»•</button>
    </div>
</div>

<div id="toast">ÄÃ£ sao chÃ©p vÃ o bá»™ nhá»› táº¡m</div>

<div id="actionModal" class="custom-modal-overlay">
    <div class="custom-modal-box">
        <h3 id="acModalTitle">TiÃªu Ä‘á»</h3>
        <p id="acModalDesc">Ná»™i dung thÃ´ng bÃ¡o</p>
        
        <input type="text" id="acModalInput" placeholder="Nháº­p ná»™i dung..." autocomplete="off">
        
        <select id="acModalSelect" class="sort-select" style="display:none; width:100%">
            <option value="date_desc">ğŸ“… Má»›i nháº¥t</option>
            <option value="date_asc">ğŸ“… CÅ© nháº¥t</option>
            <option value="name_asc">ğŸ”¤ TÃªn (A-Z)</option>
            <option value="name_desc">ğŸ”¤ TÃªn (Z-A)</option>
        </select>
        
        <div class="modal-btn-group">
            <button class="btn-modal-cancel" onclick="closeActionModal()">Há»§y</button>
            <button class="btn-modal-confirm" id="acModalBtn">Äá»“ng Ã½</button>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="script.js"></script>

</body>
</html>